<!doctype html>
<html>
<head><meta charset="utf-8"><title>Expense App</title></head>
<body>
  <h1>Expense Manager</h1>
  <form id="expenseForm">
    <input id="title" placeholder="Title" required>
    <input id="amount" placeholder="Amount" type="number" required>
    <input id="category" placeholder="Category" required>
    <input id="date" type="date">
    <button type="submit">Add</button>
  </form>
  <ul id="list"></ul>

<script>
const form = document.getElementById('expenseForm');
form.addEventListener('submit', async (e) => {
  e.preventDefault();
  const payload = {
    title: document.getElementById('title').value,
    amount: parseFloat(document.getElementById('amount').value),
    category: document.getElementById('category').value,
    date: document.getElementById('date').value
  };
  await fetch('/api/expenses', {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});
  load();
});

async function load(){
  const res = await fetch('/api/expenses');
  const data = await res.json();
  const ul = document.getElementById('list'); ul.innerHTML='';
  data.forEach(e => {
    const li = document.createElement('li');
    li.textContent = `${e.date} | ${e.category} | ${e.title} - â‚¹${e.amount}`;
    ul.appendChild(li);
  });
}

load();
</script>
</body>
</html>
